language: rust

rust:
  - 1.40.0
# Caching saves a lot of time but often causes stalled builds...
# disabled for now
# look into solution here: https://levans.fr/rust_travis_cache.html
# cache:
#  - cargo

before_script:
  # https://github.com/rust-lang/rustup/issues/1558#issuecomment-452110409
  - rustup toolchain remove stable && rustup toolchain install stable

script:
  # Ensure all checked in code is cargo-fmt'ed
  - cargo fmt --all -- --check
  # Native build and unit tests check
  - cargo test --verbose --all
  # WASM build check
  - cargo build
